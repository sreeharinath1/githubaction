name: Main Pipeline

on:
  workflow_dispatch:           # ðŸ‘ˆ Manual trigger

jobs:
  call-generator:
    # ðŸ‘ˆ Call the reusable workflow, pinned to a commit SHA for security
    uses: sreeharinath1/githubaction/.github/workflows/art-generator.yaml@56df9f41e12326cc1d650b3ccfba7843bf7c29cc
    with:
      script_name: "diamond.sh"   # ðŸ‘ˆ Input passed to reusable workflow

  process-result:
    needs: call-generator      # ðŸ‘ˆ Wait until generator job finishes
    runs-on: ubuntu-latest
    steps:
      - name: Download Result
        uses: actions/download-artifact@v4   # ðŸ‘ˆ Retrieve artifact created earlier
        with:
          name: diamond.sh-art

      - name: Print the Output Path
        run: echo "The reusable workflow created: ${{ needs.call-generator.outputs.art_file }}"
        # ðŸ‘ˆ Show the filename returned as an output
